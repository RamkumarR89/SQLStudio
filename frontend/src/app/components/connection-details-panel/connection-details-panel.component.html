<form [formGroup]="connectionForm" (ngSubmit)="onSave()" class="connection-details-form">
  <h2>Connection Details</h2>
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Connection type</mat-label>
    <mat-select formControlName="type">
      <mat-option *ngFor="let t of connectionTypes" [value]="t.value">{{ t.label }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-radio-group formControlName="inputType" class="mb-16">
    <mat-radio-button *ngFor="let t of inputTypes" [value]="t.value">{{ t.label }}</mat-radio-button>
  </mat-radio-group>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Server</mat-label>
    <input matInput formControlName="server" required placeholder="e.g. servername,port">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Authentication type</mat-label>
    <mat-select formControlName="authType">
      <mat-option *ngFor="let a of authTypes" [value]="a.value">{{ a.label }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>User name</mat-label>
    <input matInput formControlName="username" required>
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Password</mat-label>
    <input matInput formControlName="password" type="password">
  </mat-form-field>

  <mat-checkbox formControlName="rememberPassword">Remember password</mat-checkbox>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Database</mat-label>
    <input matInput formControlName="database" placeholder="<Default>">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Encrypt</mat-label>
    <mat-select formControlName="encrypt">
      <mat-option *ngFor="let e of encryptOptions" [value]="e.value">{{ e.label }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Trust server certificate</mat-label>
    <mat-select formControlName="trustServerCertificate">
      <mat-option *ngFor="let t of trustServerCertOptions" [value]="t.value">{{ t.label }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Server group</mat-label>
    <input matInput formControlName="serverGroup" placeholder="<Default>">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Name (optional)</mat-label>
    <input matInput formControlName="name">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width" *ngIf="connectionForm.value.inputType === 'connectionString'">
    <mat-label>Connection String</mat-label>
    <input matInput formControlName="connectionString">
  </mat-form-field>

  <div class="form-actions">
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="primary" type="submit" [disabled]="!connectionForm.valid">{{ isEdit ? 'Save' : 'Connect' }}</button>
    <button mat-button color="warn" type="button" *ngIf="isEdit" (click)="onDelete()">Delete</button>
  </div>
</form> 